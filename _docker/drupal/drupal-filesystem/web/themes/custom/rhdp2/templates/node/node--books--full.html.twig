<span class="dl-outage-msg"></span>

<div{{attributes.addClass("component").setAttribute("id","rhd-book")}}>

	{% include '@components/meta-bar.twig' with {
	   meta_type: 'Book',
     hide_title: content.field_hide_title,
     label: label,
     publish_date: calc_date.value|date("Y-m-d"),
     topics: content.field_tags
	} only %}

  {% if content.field_sections['#items'] %}
    {{ content.field_sections }}
  {% else %}
		<div class="pf-l-grid pf-m-gutter">
			<div{{content_attributes.addClass('pf-l-grid__item','pf-m-12-col','pf-m-9-col-on-lg')}}>
				<div class="description-wrapper">
					{{ content.field_book_description }}
				</div>

				{% if content.field_book_excerpt|render|striptags|trim is not empty %}
					<div class="book-excerpt">
						<h4>Book Excerpt</h4>
						<span class="open-quote left">&ldquo;</span>
						<span class="book-excerpt-text">
							{{ content.field_book_excerpt }}
						</span>
					</div>
				{% endif %}
				{% if (content.field_book_url[0]|render|striptags|trim is not empty) or (content.field_pdf_link[0]|render|striptags|trim is not empty) %}
					<div class="cta-label">
						<strong>Want to see more? Get the entire book.</strong>
					</div>
				{% endif %}
				{% if content.field_pdf_link[0]|render|striptags|trim is not empty %}
					<a class="pf-c-button pf-m-heavy hidden-after-login" href="{{ content.field_pdf_link[0]['#url'] }}">Log in to download</a>
				{% endif %}
				{% if ((content.field_mobi_link|render|striptags|trim is not empty) or (content.field_epub|render|striptags|trim is not empty)) %}
					<div class="other-book-formats">
						<p>
							{% if ((content.field_mobi_link|render|striptags|trim is not empty) and (content.field_epub|render|striptags|trim is not empty)) %}
								Other available formats:&nbsp;
							{% endif %}
							{% if content.field_mobi_link|render|striptags|trim is not empty %}
								<a href="{{ content.field_mobi_link[0]['#url'] }}">mobi</a>
							{% endif %}
							{% if ((content.field_mobi_link|render|striptags|trim is not empty) and (content.field_epub|render|striptags|trim is not empty)) %}
								&nbsp;|&nbsp;
							{% endif %}
							{% if content.field_epub|render|striptags|trim is not empty %}
								<a href="{{ content.field_epub[0]['#url'] }}">epub</a>
							{% endif %}
						</p>
					</div>
				{% endif %}
				{% if content.field_pdf_link[0]|render|striptags|trim is not empty %}
					<a class="pf-c-button pf-m-heavy shown-after-login" href="{{ content.field_pdf_link[0]['#url'] }}">Download PDF</a>
				{% endif %}
				{% if (content.field_book_url[0]|render|striptags|trim is not empty) and (content.field_pdf_link[0]|render|striptags|trim is empty) %}
					<a class="" href="{{ content.field_book_url[0]['#url'] }}">{{ content.field_book_url[0]['#title'] ?? content.field_book_url[0]['#url'] }}</a>
				{% endif %}
			</div>
			<div class="pf-l-grid__item pf-m-12-col pf-m-3-col-on-lg book-tags">
				{% if content.field_tags|render|striptags|trim is not empty %}
					<strong>Tags:</strong>
					{{ content.field_tags }}
				{% endif %}
				{% if content.field_related_product|render|striptags|trim is not empty %}
					{{ content.field_related_product }}
				{% endif %}
			</div>
		</div>
  {% endif %}

  {# discus comments #}
		<div class="pf-l-grid pf-m-gutter">
			<div class="pf-l-grid__item pf-m-12-col">
				{{ content.disqus_thread }}
			</div>
		</div>

</div>
